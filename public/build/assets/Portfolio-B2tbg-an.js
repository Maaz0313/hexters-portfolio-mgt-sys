import{r as d,j as t,S as x,L as q}from"./Layout-BFS5gtk9.js";import{L as _}from"./Layout-DsSlTJcM.js";import{B as z}from"./BlogPostCard-BamAglqq.js";import{F as P,P as R}from"./Pagination-B5NOufnf.js";const O=({children:u,title:m})=>t.jsxs(t.Fragment,{children:[m&&t.jsx(q,{title:m}),t.jsx(_,{children:u})]}),Y=({portfolioProjects:u=[],brandings:m=[],industries:h=[],filters:c={search:"",branding:"",industry:""}})=>{console.log("Portfolio component received:",{portfolioProjects:u,brandings:m,industries:h,filters:c});const g=Array.isArray(u)?u.map(e=>(console.log("Processing project:",e),{id:e.id,title:e.title,description:e.description||"",image:e.image?`/storage/${e.image}`:"/images/placeholder.jpg",imageAlt:e.image_alt||e.title,branding:e.branding?e.branding.name:"",industry:e.industry?e.industry.name:"",href:e.slug?route("portfolio.show",{slug:e.slug}):"",slug:e.slug||""})):[],[y,I]=d.useState(1),[i,S]=d.useState(c.search),[n,b]=d.useState(c.branding?c.branding.split(","):[]),[a,w]=d.useState(c.industry?c.industry.split(","):[]),p=6,v=y*p,N=v-p,L=g.slice(N,v),B=Math.ceil(g.length/p),C=e=>{I(e);const s={page:e};if(i&&i.trim()!==""&&(s.search=i.trim()),n.length>0){const o=n.filter(l=>l.trim()!=="");o.length>0&&(s.branding=o.join(","))}if(a.length>0){const o=a.filter(l=>l.trim()!=="");o.length>0&&(s.industry=o.join(","))}const r=window.scrollY;x.post("/portfolio/filter",s,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{document.querySelectorAll("fieldset legend").forEach(o=>{const l=o.closest("fieldset"),f=l==null?void 0:l.querySelector('div[class*="absolute"]');f&&(f.classList.add("invisible","h-0","p-0"),f.classList.remove("absolute","top-0","z-[3]","flex","max-h-[335px]"))}),setTimeout(()=>{window.scrollTo({top:r,behavior:"auto"})},100)}})},T=e=>{S(e.target.value)},j=()=>{S(""),b([]),w([]),sessionStorage.setItem("portfolioFiltersApplied","true"),x.post("/portfolio/filter",{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{document.querySelectorAll("fieldset legend").forEach(e=>{const s=e.closest("fieldset"),r=s==null?void 0:s.querySelector('div[class*="absolute"]');r&&(r.classList.add("invisible","h-0","p-0"),r.classList.remove("absolute","top-0","z-[3]","flex","max-h-[335px]"))})}})},E=()=>{const e={};if(i&&i.trim()!==""&&(e.search=i.trim()),n.length>0){const s=n.filter(r=>r.trim()!=="");s.length>0&&(e.branding=s.join(","))}if(a.length>0){const s=a.filter(r=>r.trim()!=="");s.length>0&&(e.industry=s.join(","))}console.log("Applying filters with params:",e),sessionStorage.setItem("portfolioFiltersApplied","true"),x.post("/portfolio/filter",e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{document.querySelectorAll("fieldset legend").forEach(s=>{const r=s.closest("fieldset"),o=r==null?void 0:r.querySelector('div[class*="absolute"]');o&&(o.classList.add("invisible","h-0","p-0"),o.classList.remove("absolute","top-0","z-[3]","flex","max-h-[335px]"))})}})};d.useEffect(()=>{const e=setTimeout(()=>{const s=n.join(","),r=a.join(","),o=c.branding||"",l=c.industry||"";(i!==c.search||s!==o||r!==l)&&E()},500);return()=>clearTimeout(e)},[i,n,a]),d.useEffect(()=>{if(sessionStorage.getItem("portfolioFiltersApplied")){sessionStorage.removeItem("portfolioFiltersApplied");const e=setTimeout(()=>{const s=A.current;if(s)try{const r=s.getBoundingClientRect(),o=window.pageYOffset||document.documentElement.scrollTop,l=r.top+o;window.scrollTo({top:l-100,behavior:"smooth"}),console.log("Scrolled to all-blogs section after filter applied")}catch(r){console.error("Error scrolling to element:",r)}},300);return()=>clearTimeout(e)}},[]);const A=d.useRef(null),F=Array.isArray(m)?m.map(e=>({id:e.id?e.id.toString():"",label:e.name||""})):[],k=Array.isArray(h)?h.map(e=>({id:e.id?e.id.toString():"",label:e.name||""})):[];return t.jsx(O,{title:"Portfolio",children:t.jsxs("section",{ref:A,id:"all-blogs",className:"py-16 md:py-20",children:[t.jsxs("div",{className:"container mx-auto w-full max-w-[1220px] px-6 py-0",children:[t.jsxs("div",{className:"mb-48 text-center",children:[t.jsx("h2",{className:"m-0 text-[1.8571428571rem] leading-[1.08] font-normal text-[#4ecdc4] md:text-[2.6428571429rem]",children:"Portfolio"}),t.jsx("p",{className:"text-[1.1428571429rem]/[1.5] font-light text-white md:text-2xl/[1.375]",children:"Luminary has produced over 400 successful projects over two decades in the industry. Here are just a few examples of our recent work."})]}),t.jsxs("div",{className:"mb-4 flex flex-wrap items-center justify-center gap-8 md:m-0 md:mx-auto md:mb-14",children:[t.jsx("div",{className:"w-full md:w-auto",children:t.jsx("input",{className:"search h-12 w-full border-0 border-b border-[#4ecdc4] bg-[right_center] py-4 pr-8 pl-4 text-white ring-0 placeholder:text-white focus:border-[#4ecdc4] focus:outline-0",type:"text",name:"search",id:"search",placeholder:"Enter keywords",value:i,onChange:T})}),t.jsx(P,{title:"Branding",items:F,selectedItems:n,onSelectionChange:e=>b(e),minWidth:250}),t.jsx(P,{title:"Industry",items:k,selectedItems:a,onSelectionChange:e=>w(e),minWidth:250}),t.jsx("button",{className:"group flex size-12 cursor-pointer items-center justify-center disabled:cursor-default",onClick:j,disabled:!i&&n.length===0&&a.length===0,children:t.jsxs("svg",{className:"text-[#4ecdc4] [transition:color_.4s_ease] group-disabled:text-[#6d6873] group-disabled:[transition:color_.2s_ease]",xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:[t.jsxs("g",{children:[t.jsx("rect",{fill:"none",height:"24",width:"24"}),t.jsx("rect",{fill:"none",height:"24",width:"24"}),t.jsx("rect",{fill:"none",height:"24",width:"24"})]}),t.jsxs("g",{children:[t.jsx("g",{}),t.jsx("path",{d:"M12,5V1L7,6l5,5V7c3.31,0,6,2.69,6,6s-2.69,6-6,6s-6-2.69-6-6H4c0,4.42,3.58,8,8,8s8-3.58,8-8S16.42,5,12,5z"})]})]})})]})]}),t.jsx("div",{className:"container grid grid-cols-3 gap-6 max-md:grid-cols-1",children:g.length>0?L.map((e,s)=>t.jsx("div",{children:t.jsx(z,{title:e.title,href:e.slug?route("portfolio.show",{slug:e.slug}):"",imageSrc:e.image,imageAlt:e.imageAlt,excerpt:e.description})},s)):t.jsxs("div",{className:"col-span-3 py-10 text-center",children:[t.jsx("p",{className:"text-lg text-gray-600",children:i||n.length>0||a.length>0?"No portfolio projects found matching your filters. Try adjusting your criteria.":"No portfolio projects found. Check back later for new content."}),(i||n.length>0||a.length>0)&&t.jsx("button",{onClick:j,className:"mt-4 cursor-pointer rounded-md bg-[#4ecdc4] px-4 py-2 text-[#0a2550] transition-colors hover:bg-[#0a2550] hover:text-[#4ecdc4]",children:"Clear All Filters"})]})}),g.length>0&&t.jsx(R,{currentPage:y,totalPages:B,handlePageChange:C})]})})};export{Y as default};
