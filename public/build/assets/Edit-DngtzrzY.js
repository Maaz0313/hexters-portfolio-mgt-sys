import{r as y,j as e,m as w,L as C,$ as h}from"./Layout-BFS5gtk9.js";import{C as u}from"./checkbox-B9qFfRQ7.js";import{I as $}from"./input-57RDWpng.js";import{L as c}from"./label-CEKhsEFt.js";import{c as k}from"./button-DHEMKb3Q.js";import{A as F,X as E,F as L}from"./app-layout-jEZKEoje.js";import"./index-DP9BSvV7.js";import"./index-DlY1O6XI.js";import"./app-CpvZPBdQ.js";import"./createLucideIcon-D_KW33HM.js";const f=y.forwardRef(({className:r,...l},m)=>e.jsx("textarea",{"data-slot":"textarea",className:k("border-input bg-background placeholder:text-muted-foreground focus-visible:ring-ring flex min-h-[80px] w-full rounded-md border px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",r),ref:m,...l}));f.displayName="Textarea";const P=({role:r,groupedPermissions:l})=>{const m=[{title:"Dashboard",href:"/dashboard"},{title:"Roles",href:"/dashboard/roles"},{title:r.name,href:`/dashboard/roles/${r.id}`},{title:"Edit",href:`/dashboard/roles/${r.id}/edit`}],{data:a,setData:d,put:b,errors:o}=w({name:r.name,description:r.description||"",permissions:r.permissions.map(s=>s.id)}),j=s=>{s.preventDefault(),b(route("admin.roles.update",r.id))},g=(s,t)=>{t?d("permissions",[...a.permissions,s]):d("permissions",a.permissions.filter(i=>i!==s))},v=(s,t)=>{const i=s.map(n=>n.id);if(t){const n=[...a.permissions];i.forEach(x=>{n.includes(x)||n.push(x)}),d("permissions",n)}else d("permissions",a.permissions.filter(n=>!i.includes(n)))},p=s=>s.every(t=>a.permissions.includes(t.id)),N=s=>s.some(t=>a.permissions.includes(t.id))&&!p(s);return e.jsxs(F,{breadcrumbs:m,children:[e.jsx(C,{title:`Edit Role: ${r.name}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("h1",{className:"title-text text-primary text-3xl font-bold",children:["Edit Role: ",r.name]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(h,{href:route("admin.roles.index"),className:"bg-muted text-muted-foreground hover:bg-muted/80 ring-muted inline-flex cursor-pointer items-center rounded-md border border-transparent px-4 py-2 text-xs font-semibold tracking-widest uppercase transition focus:ring focus:outline-none disabled:opacity-25",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Cancel"]}),e.jsxs(h,{href:route("admin.roles.show",r.id),className:"bg-accent text-accent-foreground hover:bg-accent/80 ring-accent inline-flex cursor-pointer items-center rounded-md border border-transparent px-4 py-2 text-xs font-semibold tracking-widest uppercase transition focus:ring focus:outline-none disabled:opacity-25",children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"View"]})]})]}),e.jsx("div",{className:"bg-card overflow-hidden rounded-lg shadow-sm",children:e.jsx("form",{id:"roleForm",onSubmit:j,className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"name",children:["Name ",e.jsx("span",{className:"text-accent",children:"*"})]}),e.jsx($,{id:"name",type:"text",value:a.name,onChange:s=>d("name",s.target.value),required:!0}),o.name&&e.jsx("p",{className:"text-destructive text-sm",children:o.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"description",children:"Description"}),e.jsx(f,{id:"description",value:a.description,onChange:s=>d("description",s.target.value),rows:3,placeholder:"Provide a description of this role's purpose and responsibilities"}),o.description&&e.jsx("p",{className:"text-destructive text-sm",children:o.description})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(c,{children:["Permissions ",e.jsx("span",{className:"text-accent",children:"*"})]}),Object.entries(l).map(([s,t])=>e.jsxs("div",{className:"border-border mb-4 rounded-md border p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center space-x-2",children:[e.jsx(u,{id:`group-${s}`,checked:p(t),indeterminate:N(t),onCheckedChange:i=>v(t,i===!0)}),e.jsx(c,{htmlFor:`group-${s}`,className:"cursor-pointer font-medium capitalize",children:s})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 pl-6 md:grid-cols-2 lg:grid-cols-3",children:t.map(i=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{id:`permission-${i.id}`,checked:a.permissions.includes(i.id),onCheckedChange:n=>g(i.id,n===!0)}),e.jsx(c,{htmlFor:`permission-${i.id}`,className:"cursor-pointer",children:i.name})]},i.id))})]},s)),o.permissions&&e.jsx("p",{className:"text-destructive text-sm",children:o.permissions})]})]})})})]})})]})};export{P as default};
