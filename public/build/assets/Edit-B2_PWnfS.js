import{m as F,r as h,j as e,L as T,$ as p}from"./Layout-BFS5gtk9.js";import{A as S,X as U,F as L}from"./app-layout-jEZKEoje.js";import{S as $}from"./save-DWA_gTmn.js";import"./button-DHEMKb3Q.js";import"./index-DP9BSvV7.js";import"./index-DlY1O6XI.js";import"./app-CpvZPBdQ.js";import"./createLucideIcon-D_KW33HM.js";const M=({blogPost:r,categories:f,tags:c,selectedTags:b})=>{var g;const j=[{title:"Dashboard",href:"/dashboard"},{title:"Blog Posts",href:"/dashboard/blog-posts"},{title:"Edit",href:`/dashboard/blog-posts/${r.id}/edit`}],{data:d,setData:i,post:v,processing:m,errors:s}=F({_method:"PUT",title:r.title,category_id:((g=r.category_id)==null?void 0:g.toString())||"",excerpt:r.excerpt||"",content:r.content,featured_image:null,thumbnail_image:null,is_published:r.is_published,tags:b}),[u,y]=h.useState(r.featured_image?`/storage/${r.featured_image}`:null),[x,N]=h.useState(r.thumbnail_image?`/storage/${r.thumbnail_image}`:null),w=t=>{t.preventDefault(),v(route("admin.blog-posts.update",r.id),{forceFormData:!0})},_=t=>{if(t.target.files&&t.target.files[0]){const a=t.target.files[0];i("featured_image",a);const n=new FileReader;n.onload=o=>{var l;y((l=o.target)==null?void 0:l.result)},n.readAsDataURL(a)}},k=t=>{if(t.target.files&&t.target.files[0]){const a=t.target.files[0];i("thumbnail_image",a);const n=new FileReader;n.onload=o=>{var l;N((l=o.target)==null?void 0:l.result)},n.readAsDataURL(a)}},C=t=>{const a=[...d.tags],n=a.indexOf(t);n===-1?i("tags",[...a,t]):(a.splice(n,1),i("tags",a))};return e.jsxs(S,{breadcrumbs:j,children:[e.jsx(T,{title:`Edit Blog Post: ${r.title}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-card overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"bg-card border-border border-b p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h1",{className:"title-text text-primary text-2xl font-bold",children:"Edit Blog Post"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(p,{href:route("admin.blog-posts.index"),className:"bg-muted text-muted-foreground hover:bg-muted/80 ring-muted inline-flex cursor-pointer items-center rounded-md border border-transparent px-4 py-2 text-xs font-semibold tracking-widest uppercase transition focus:ring focus:outline-none disabled:opacity-25",children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Cancel"]}),e.jsxs(p,{href:route("blog.show",r.slug),target:"_blank",className:"bg-accent text-accent-foreground hover:bg-accent/80 ring-accent inline-flex cursor-pointer items-center rounded-md border border-transparent px-4 py-2 text-xs font-semibold tracking-widest uppercase transition focus:ring focus:outline-none disabled:opacity-25",children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"View"]})]})]}),e.jsx("form",{onSubmit:w,children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 md:col-span-2",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"title",className:"text-card-foreground block text-sm font-medium",children:["Title ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("input",{type:"text",id:"title",value:d.title,onChange:t=>i("title",t.target.value),className:"border-border bg-background text-card-foreground focus:border-primary focus:ring-primary focus:ring-opacity-50 mt-1 block w-full rounded-md shadow-sm focus:ring",required:!0}),d.title!==r.title&&e.jsx("p",{className:"text-accent mt-1 text-sm",children:"Note: Changing the title will update the URL slug."}),e.jsxs("p",{className:"text-muted-foreground mt-1 text-sm",children:["Current URL: ",window.location.origin,"/blogs/",r.slug]}),s.title&&e.jsx("p",{className:"text-destructive mt-1 text-sm",children:s.title})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"excerpt",className:"text-card-foreground block text-sm font-medium",children:"Excerpt"}),e.jsx("textarea",{id:"excerpt",value:d.excerpt,onChange:t=>i("excerpt",t.target.value),rows:3,className:"border-border bg-background text-card-foreground focus:border-primary focus:ring-primary focus:ring-opacity-50 mt-1 block w-full rounded-md shadow-sm focus:ring"}),s.excerpt&&e.jsx("p",{className:"text-destructive mt-1 text-sm",children:s.excerpt})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"content",className:"text-card-foreground block text-sm font-medium",children:["Content ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("textarea",{id:"content",value:d.content,onChange:t=>i("content",t.target.value),rows:15,className:"border-border bg-background text-card-foreground focus:border-primary focus:ring-primary focus:ring-opacity-50 mt-1 block w-full rounded-md shadow-sm focus:ring",required:!0}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:'You can use HTML tags for formatting. For example, use <h2> for headings, <p> for paragraphs, <a href="..."> for links, etc.'}),s.content&&e.jsx("p",{className:"text-destructive mt-1 text-sm",children:s.content})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"featured_image",className:"text-card-foreground block text-sm font-medium",children:"Featured Image"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx("input",{type:"file",id:"featured_image",onChange:_,className:"sr-only",accept:"image/*"}),e.jsx("label",{htmlFor:"featured_image",className:"bg-background border-border text-card-foreground hover:bg-muted focus:ring-primary inline-flex cursor-pointer items-center rounded-md border px-4 py-2 text-xs font-semibold tracking-widest uppercase shadow-sm transition focus:ring-2 focus:ring-offset-2 focus:outline-none disabled:opacity-25",children:r.featured_image?"Change Image":"Select Image"})]}),u&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:u,alt:"Preview",className:"h-40 w-full rounded-md object-cover"})}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"This image will be displayed on the blog post page. The current image will be preserved unless you select a new one."}),s.featured_image&&e.jsx("p",{className:"text-destructive mt-1 text-sm",children:s.featured_image})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"thumbnail_image",className:"text-card-foreground block text-sm font-medium",children:"Thumbnail Image"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx("input",{type:"file",id:"thumbnail_image",onChange:k,className:"sr-only",accept:"image/*"}),e.jsx("label",{htmlFor:"thumbnail_image",className:"bg-background border-border text-card-foreground hover:bg-muted focus:ring-primary inline-flex cursor-pointer items-center rounded-md border px-4 py-2 text-xs font-semibold tracking-widest uppercase shadow-sm transition focus:ring-2 focus:ring-offset-2 focus:outline-none disabled:opacity-25",children:r.thumbnail_image?"Change Thumbnail":"Select Thumbnail"})]}),x&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:x,alt:"Thumbnail Preview",className:"h-40 w-full rounded-md object-cover"})}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"This image will be displayed on blog cards. If not provided, the featured image will be used. The current thumbnail will be preserved unless you select a new one."}),s.thumbnail_image&&e.jsx("p",{className:"text-destructive mt-1 text-sm",children:s.thumbnail_image})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category_id",className:"text-card-foreground block text-sm font-medium",children:"Category"}),e.jsxs("select",{id:"category_id",value:d.category_id,onChange:t=>i("category_id",t.target.value),className:"border-border bg-background text-card-foreground focus:border-primary focus:ring-primary focus:ring-opacity-50 mt-1 block w-full rounded-md shadow-sm focus:ring",children:[e.jsx("option",{value:"",children:"Select a category"}),f.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),s.category_id&&e.jsx("p",{className:"text-destructive mt-1 text-sm",children:s.category_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-card-foreground mb-2 block text-sm font-medium",children:"Tags"}),e.jsxs("div",{className:"border-border bg-background max-h-60 space-y-2 overflow-y-auto rounded-md border p-2",children:[c.map(t=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:`tag-${t.id}`,checked:d.tags.includes(t.id),onChange:()=>C(t.id),className:"border-border text-primary focus:border-primary focus:ring-primary focus:ring-opacity-50 rounded shadow-sm focus:ring"}),e.jsx("label",{htmlFor:`tag-${t.id}`,className:"text-card-foreground ml-2 text-sm",children:t.name})]},t.id)),c.length===0&&e.jsx("p",{className:"text-muted-foreground text-sm",children:"No tags available"})]}),s.tags&&e.jsx("p",{className:"text-destructive mt-1 text-sm",children:s.tags})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_published",checked:d.is_published,onChange:t=>i("is_published",t.target.checked),className:"border-border text-primary focus:border-primary focus:ring-primary focus:ring-opacity-50 rounded shadow-sm focus:ring"}),e.jsx("label",{htmlFor:"is_published",className:"text-card-foreground ml-2 text-sm",children:r.is_published?"Published":"Publish"})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{type:"submit",disabled:m,className:"bg-primary text-primary-foreground hover:bg-primary/90 ring-primary inline-flex w-full cursor-pointer items-center justify-center rounded-md border border-transparent px-4 py-2 text-xs font-semibold tracking-widest uppercase transition focus:ring focus:outline-none disabled:opacity-25",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),m?"Saving...":"Update Blog Post"]})})]})]})})]})})})})]})};export{M as default};
