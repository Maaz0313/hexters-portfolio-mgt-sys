import{r as n,j as e}from"./Layout-CLlOvUih.js";import{F as D,P as O}from"./Pagination-DbvdMdnt.js";import{B as V}from"./BlogPostCard-CZEYuxHY.js";import{M as K,u as _,P as U,a as Y,b as G,L as X,m as P}from"./proxy-CztysaOK.js";import{S as $,L as J}from"./portfolio-layout-CKj04gbG.js";import{L as Q}from"./Layout-BBAAMPL7.js";class Z extends n.Component{getSnapshotBeforeUpdate(h){const r=this.props.childRef.current;if(r&&h.isPresent&&!this.props.isPresent){const s=r.offsetParent,d=s instanceof HTMLElement&&s.offsetWidth||0,u=this.props.sizeRef.current;u.height=r.offsetHeight||0,u.width=r.offsetWidth||0,u.top=r.offsetTop,u.left=r.offsetLeft,u.right=d-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ee({children:o,isPresent:h,anchorX:r}){const s=n.useId(),d=n.useRef(null),u=n.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=n.useContext(K);return n.useInsertionEffect(()=>{const{width:S,height:i,top:p,left:m,right:l}=u.current;if(h||!d.current||!S||!i)return;const b=r==="left"?`left: ${m}`:`right: ${l}`;d.current.dataset.motionPopId=s;const a=document.createElement("style");return y&&(a.nonce=y),document.head.appendChild(a),a.sheet&&a.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${S}px !important;
            height: ${i}px !important;
            ${b}px !important;
            top: ${p}px !important;
          }
        `),()=>{document.head.removeChild(a)}},[h]),e.jsx(Z,{isPresent:h,childRef:d,sizeRef:u,children:n.cloneElement(o,{ref:d})})}const te=({children:o,initial:h,isPresent:r,onExitComplete:s,custom:d,presenceAffectsLayout:u,mode:y,anchorX:S})=>{const i=_(se),p=n.useId();let m=!0,l=n.useMemo(()=>(m=!1,{id:p,initial:h,isPresent:r,custom:d,onExitComplete:b=>{i.set(b,!0);for(const a of i.values())if(!a)return;s&&s()},register:b=>(i.set(b,!1),()=>i.delete(b))}),[r,i,s]);return u&&m&&(l={...l}),n.useMemo(()=>{i.forEach((b,a)=>i.set(a,!1))},[r]),n.useEffect(()=>{!r&&!i.size&&s&&s()},[r]),y==="popLayout"&&(o=e.jsx(ee,{isPresent:r,anchorX:S,children:o})),e.jsx(U.Provider,{value:l,children:o})};function se(){return new Map}const R=o=>o.key||"";function W(o){const h=[];return n.Children.forEach(o,r=>{n.isValidElement(r)&&h.push(r)}),h}const ne=({children:o,custom:h,initial:r=!0,onExitComplete:s,presenceAffectsLayout:d=!0,mode:u="sync",propagate:y=!1,anchorX:S="left"})=>{const[i,p]=Y(y),m=n.useMemo(()=>W(o),[o]),l=y&&!i?[]:m.map(R),b=n.useRef(!0),a=n.useRef(m),N=_(()=>new Map),[w,M]=n.useState(m),[j,E]=n.useState(m);G(()=>{b.current=!1,a.current=m;for(let v=0;v<j.length;v++){const g=R(j[v]);l.includes(g)?N.delete(g):N.get(g)!==!0&&N.set(g,!1)}},[j,l.length,l.join("-")]);const L=[];if(m!==w){let v=[...m];for(let g=0;g<j.length;g++){const k=j[g],A=R(k);l.includes(A)||(v.splice(g,0,k),L.push(k))}return u==="wait"&&L.length&&(v=L),E(W(v)),M(m),null}const{forceRender:I}=n.useContext(X);return e.jsx(e.Fragment,{children:j.map(v=>{const g=R(v),k=y&&!i?!1:m===j||l.includes(g),A=()=>{if(N.has(g))N.set(g,!0);else return;let B=!0;N.forEach(z=>{z||(B=!1)}),B&&(I==null||I(),E(a.current),y&&(p==null||p()),s&&s())};return e.jsx(te,{isPresent:k,initial:!b.current||r?void 0:!1,custom:h,presenceAffectsLayout:d,mode:u,onExitComplete:k?void 0:A,anchorX:S,children:v},g)})})},re=({isOpen:o,onClose:h,currentProject:r,projects:s})=>{const[d,u]=n.useState(0);if(n.useEffect(()=>{if(r){const p=s.findIndex(m=>m.title===r.title);p!==-1&&u(p)}},[r,s]),n.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[o]),!o||!r)return null;const y=()=>{u(p=>(p+1)%s.length)},S=()=>{u(p=>(p-1+s.length)%s.length)},i=s[d];return e.jsx(ne,{children:o&&e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-md",style:{backgroundColor:"rgba(48, 10, 68, 0.75)"},children:[e.jsx("button",{onClick:S,className:"fixed top-1/2 left-6 z-20 -translate-y-1/2 transform cursor-pointer rounded-full border-2 border-[#4716ED] bg-white p-4 shadow-lg transition-all duration-300 hover:scale-110 hover:bg-white",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-[#4716ED]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:y,className:"fixed top-1/2 right-6 z-20 -translate-y-1/2 transform cursor-pointer rounded-full border-2 border-[#4716ED] bg-white p-4 shadow-lg transition-all duration-300 hover:scale-110 hover:bg-white",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-[#4716ED]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("button",{onClick:h,className:"fixed top-6 right-6 z-20 cursor-pointer rounded-full bg-[#4716ED] p-3 text-white shadow-lg transition-colors duration-300 hover:bg-[#300A44]",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs(P.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative flex max-h-[90vh] w-full max-w-5xl flex-col rounded-xl bg-white shadow-2xl",children:[e.jsx("div",{className:"custom-scrollbar flex-grow overflow-y-auto",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"relative w-full overflow-hidden rounded-t-lg pb-[56.25%]",children:[e.jsx(P.img,{initial:{opacity:.8,scale:1.05},animate:{opacity:1,scale:1},transition:{duration:.4},src:i.image,alt:i.imageAlt,className:"absolute inset-0 h-full w-full object-cover"},i.image),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"})]}),e.jsxs("div",{className:"p-8",children:[e.jsx(P.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.3},className:"mb-4 text-3xl font-bold text-[#300A44]",children:i.title},`title-${d}`),e.jsx(P.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.3},className:"mb-4 text-lg text-gray-700",children:i.description},`desc-${d}`),e.jsxs(P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.25,duration:.3},className:"mb-6 flex flex-wrap gap-4",children:[i.branding&&e.jsxs("div",{className:"inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-sm font-medium text-blue-800",children:[e.jsx("span",{className:"mr-1 font-bold",children:"Branding:"})," ",i.branding]}),i.industry&&e.jsxs("div",{className:"inline-flex items-center rounded-full bg-purple-100 px-3 py-1 text-sm font-medium text-purple-800",children:[e.jsx("span",{className:"mr-1 font-bold",children:"Industry:"})," ",i.industry]})]},`details-${d}`),e.jsx(P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.3},className:"mb-8"})]})]})}),e.jsx("div",{className:"absolute right-0 bottom-6 left-0 flex justify-center",children:e.jsxs("div",{className:"rounded-full bg-[#300A44]/80 px-4 py-2 text-sm font-medium text-white shadow-lg backdrop-blur-sm",children:[d+1," / ",s.length]})})]})]})})},ie=({children:o,title:h})=>e.jsxs(e.Fragment,{children:[h&&e.jsx(J,{title:h}),e.jsx(Q,{children:o})]}),he=({portfolioProjects:o=[],brandings:h=[],industries:r=[],filters:s={search:"",branding:"",industry:""}})=>{console.log("Portfolio component received:",{portfolioProjects:o,brandings:h,industries:r,filters:s});const d=Array.isArray(o)?o.map(t=>(console.log("Processing project:",t),{id:t.id,title:t.title,description:t.description||"",image:t.image?`/storage/${t.image}`:"/images/placeholder.jpg",imageAlt:t.image_alt||t.title,branding:t.branding?t.branding.name:"",industry:t.industry?t.industry.name:"",href:`/portfolio/${t.slug}`})):[],[u,y]=n.useState(1),[S,i]=n.useState(!1),[p,m]=n.useState(null),[l,b]=n.useState(s.search),[a,N]=n.useState(s.branding?s.branding.split(","):[]),[w,M]=n.useState(s.industry?s.industry.split(","):[]),j=6,E=u*j,L=E-j,I=d.slice(L,E),v=Math.ceil(d.length/j),g=t=>{y(t);const c={page:t};if(l&&l.trim()!==""&&(c.search=l.trim()),a.length>0){const x=a.filter(C=>C.trim()!=="");x.length>0&&(c.branding=x.join(","))}if(w.length>0){const x=w.filter(C=>C.trim()!=="");x.length>0&&(c.industry=x.join(","))}const f=window.scrollY;$.post("/portfolio/filter",c,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{document.querySelectorAll("fieldset legend").forEach(x=>{const C=x.closest("fieldset"),T=C==null?void 0:C.querySelector('div[class*="absolute"]');T&&(T.classList.add("invisible","h-0","p-0"),T.classList.remove("absolute","top-0","z-[3]","flex","max-h-[335px]"))}),setTimeout(()=>{window.scrollTo({top:f,behavior:"auto"})},100)}})},k=t=>{m(t),i(!0)},A=t=>{b(t.target.value)},B=()=>{b(""),N([]),M([]),sessionStorage.setItem("portfolioFiltersApplied","true"),$.post("/portfolio/filter",{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{document.querySelectorAll("fieldset legend").forEach(t=>{const c=t.closest("fieldset"),f=c==null?void 0:c.querySelector('div[class*="absolute"]');f&&(f.classList.add("invisible","h-0","p-0"),f.classList.remove("absolute","top-0","z-[3]","flex","max-h-[335px]"))})}})},z=()=>{const t={};if(l&&l.trim()!==""&&(t.search=l.trim()),a.length>0){const c=a.filter(f=>f.trim()!=="");c.length>0&&(t.branding=c.join(","))}if(w.length>0){const c=w.filter(f=>f.trim()!=="");c.length>0&&(t.industry=c.join(","))}console.log("Applying filters with params:",t),sessionStorage.setItem("portfolioFiltersApplied","true"),$.post("/portfolio/filter",t,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{document.querySelectorAll("fieldset legend").forEach(c=>{const f=c.closest("fieldset"),x=f==null?void 0:f.querySelector('div[class*="absolute"]');x&&(x.classList.add("invisible","h-0","p-0"),x.classList.remove("absolute","top-0","z-[3]","flex","max-h-[335px]"))})}})};n.useEffect(()=>{const t=setTimeout(()=>{const c=a.join(","),f=w.join(","),x=s.branding||"",C=s.industry||"";(l!==s.search||c!==x||f!==C)&&z()},500);return()=>clearTimeout(t)},[l,a,w]),n.useEffect(()=>{if(sessionStorage.getItem("portfolioFiltersApplied")){sessionStorage.removeItem("portfolioFiltersApplied");const t=setTimeout(()=>{const c=F.current;if(c)try{const f=c.getBoundingClientRect(),x=window.pageYOffset||document.documentElement.scrollTop,C=f.top+x;window.scrollTo({top:C-100,behavior:"smooth"}),console.log("Scrolled to all-blogs section after filter applied")}catch(f){console.error("Error scrolling to element:",f)}},300);return()=>clearTimeout(t)}},[]);const F=n.useRef(null),q=Array.isArray(h)?h.map(t=>({id:t.id?t.id.toString():"",label:t.name||""})):[],H=Array.isArray(r)?r.map(t=>({id:t.id?t.id.toString():"",label:t.name||""})):[];return e.jsx(ie,{title:"Portfolio",children:e.jsxs("section",{ref:F,id:"all-blogs",className:"py-16 md:py-20",children:[e.jsxs("div",{className:"container mx-auto w-full max-w-[1220px] px-6 py-0",children:[e.jsxs("div",{className:"mb-48 text-center",children:[e.jsx("h2",{className:"m-0 text-[1.8571428571rem] leading-[1.08] font-normal text-[#18161a] md:text-[2.6428571429rem]",children:"Portfolio"}),e.jsx("p",{className:"text-[1.1428571429rem]/[1.5] font-light text-[#18161a] md:text-2xl/[1.375]",children:"Luminary has produced over 400 successful projects over two decades in the industry. Here are just a few examples of our recent work."})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-8 mb-4 md:m-0 md:mx-auto md:mb-14",children:[e.jsx("div",{className:"w-full md:w-auto",children:e.jsx("input",{className:"search h-12 w-full border-0 border-b border-[#300A44] bg-[right_center] py-4 pr-8 pl-4 ring-0 focus:outline-0 focus:border-[#4716ed]",type:"text",name:"search",id:"search",placeholder:"Enter keywords",value:l,onChange:A})}),e.jsx(D,{title:"Branding",items:q,selectedItems:a,onSelectionChange:t=>N(t),minWidth:250}),e.jsx(D,{title:"Industry",items:H,selectedItems:w,onSelectionChange:t=>M(t),minWidth:250}),e.jsx("button",{className:"flex size-12 items-center justify-center group disabled:cursor-default cursor-pointer",onClick:B,disabled:!l&&a.length===0&&w.length===0,children:e.jsxs("svg",{className:"text-[#300a44] [transition:color_.4s_ease] group-disabled:text-[#6d6873] group-disabled:[transition:color_.2s_ease]",xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:[e.jsxs("g",{children:[e.jsx("rect",{fill:"none",height:"24",width:"24"}),e.jsx("rect",{fill:"none",height:"24",width:"24"}),e.jsx("rect",{fill:"none",height:"24",width:"24"})]}),e.jsxs("g",{children:[e.jsx("g",{}),e.jsx("path",{d:"M12,5V1L7,6l5,5V7c3.31,0,6,2.69,6,6s-2.69,6-6,6s-6-2.69-6-6H4c0,4.42,3.58,8,8,8s8-3.58,8-8S16.42,5,12,5z"})]})]})})]})]}),e.jsx("div",{className:"container grid grid-cols-3 gap-6 max-md:grid-cols-1",children:d.length>0?I.map((t,c)=>e.jsx("div",{children:e.jsx(V,{title:t.title,href:"",imageSrc:t.image,imageAlt:t.imageAlt,excerpt:t.description,onClick:()=>k(t)})},c)):e.jsxs("div",{className:"col-span-3 text-center py-10",children:[e.jsx("p",{className:"text-lg text-gray-600",children:l||a.length>0||w.length>0?"No portfolio projects found matching your filters. Try adjusting your criteria.":"No portfolio projects found. Check back later for new content."}),(l||a.length>0||w.length>0)&&e.jsx("button",{onClick:B,className:"mt-4 px-4 py-2 bg-[#4716ED] text-white rounded-md hover:bg-[#3a11c5] transition-colors cursor-pointer",children:"Clear All Filters"})]})}),d.length>0&&e.jsx(O,{currentPage:u,totalPages:v,handlePageChange:g}),e.jsx(re,{isOpen:S,onClose:()=>i(!1),currentProject:p,projects:d})]})})};export{he as default};
