import{r as g,j as t}from"./Layout-CLlOvUih.js";import{B as w}from"./BlogPostCard-CZEYuxHY.js";import{F as _,P as D}from"./Pagination-DbvdMdnt.js";import{S as u,L as R}from"./portfolio-layout-CKj04gbG.js";import{L as q}from"./Layout-BBAAMPL7.js";const V=({children:m,title:h})=>t.jsxs(t.Fragment,{children:[h&&t.jsx(R,{title:h}),t.jsx(q,{children:m})]}),G=({blogPosts:m={data:[],current_page:1,last_page:1,per_page:10,total:0},latestPosts:h=[],categories:b=[],tags:T=[],authors:O=[],popularCategories:M=[],filters:n={search:"",category:"",tag:"",author:""}})=>{const p=e=>{var s,r;return{href:`/blogs/${e.slug}`,imageSrc:e.featured_image?`/storage/${e.featured_image}`:"/images/placeholder.jpg",imageAlt:e.title,readTime:Math.ceil((((s=e.content)==null?void 0:s.length)||0)/1e3).toString(),title:e.title,excerpt:e.excerpt||"",authorImage:"/images/avatar-placeholder.jpg",authorName:e.user.name,date:new Date(e.published_at).toLocaleDateString("en-US",{day:"2-digit",month:"long",year:"numeric"}),category:((r=e.category)==null?void 0:r.name)||"Uncategorized"}},A=h.map(p),v=b.reduce((e,s)=>{const r=m.data.filter(o=>{var a;return((a=o.category)==null?void 0:a.id)===s.id}).slice(0,3).map(p);return r.length>0&&(e[s.name]=r),e},{}),B=Object.keys(v).slice(0,2),[E,L]=g.useState(m.current_page),[l,y]=g.useState(n.search),[c,f]=g.useState(()=>n.category&&n.category.trim()!==""?n.category.split(",").filter(e=>e.trim()!==""):[]),[d,S]=g.useState(()=>n.tag&&n.tag.trim()!==""?n.tag.split(",").filter(e=>e.trim()!==""):[]),[i,k]=g.useState(n.author),I=e=>{L(e);const s={page:e};if(l&&l.trim()!==""&&(s.search=l.trim()),c.length>0){const o=c.filter(a=>a.trim()!=="");o.length>0&&(s.category=o.join(","))}if(d.length>0){const o=d.filter(a=>a.trim()!=="");o.length>0&&(s.tag=o.join(","))}i&&i.trim()!==""&&(s.author=i.trim());const r=window.scrollY;u.post("/blogs/filter",s,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{document.querySelectorAll("fieldset legend").forEach(o=>{const a=o.closest("fieldset"),j=a==null?void 0:a.querySelector('div[class*="absolute"]');j&&(j.classList.add("invisible","h-0","p-0"),j.classList.remove("absolute","top-0","z-[3]","flex","max-h-[335px]"))}),setTimeout(()=>{window.scrollTo({top:r,behavior:"auto"})},100)}})},N=()=>{y(""),f([]),S([]),k(""),sessionStorage.setItem("blogFiltersApplied","true"),u.post("/blogs/filter",{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{document.querySelectorAll("fieldset legend").forEach(e=>{const s=e.closest("fieldset"),r=s==null?void 0:s.querySelector('div[class*="absolute"]');r&&(r.classList.add("invisible","h-0","p-0"),r.classList.remove("absolute","top-0","z-[3]","flex","max-h-[335px]"))})}})},F=()=>{const e={};if(l&&l.trim()!==""&&(e.search=l.trim()),c.length>0){const s=c.filter(r=>r.trim()!=="");s.length>0&&(e.category=s.join(","))}if(d.length>0){const s=d.filter(r=>r.trim()!=="");s.length>0&&(e.tag=s.join(","))}i&&i.trim()!==""&&(e.author=i.trim()),console.log("Applying filters with params:",e),u.post("/blogs/filter",e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{document.querySelectorAll("fieldset legend").forEach(s=>{const r=s.closest("fieldset"),o=r==null?void 0:r.querySelector('div[class*="absolute"]');o&&(o.classList.add("invisible","h-0","p-0"),o.classList.remove("absolute","top-0","z-[3]","flex","max-h-[335px]"))}),sessionStorage.setItem("blogFiltersApplied","true")}})};g.useEffect(()=>{if(typeof window<"u"){const e=setTimeout(()=>{const s=c.join(","),r=d.join(","),o=n.category||"",a=n.tag||"";(l!==n.search||s!==o||r!==a||i!==n.author)&&F()},500);return()=>clearTimeout(e)}},[l,c,d,i]),g.useEffect(()=>{console.log("Current filters:",{search:l,categories:c,tags:d,author:i,blogPostsCount:m.data.length})},[l,c,d,i,m.data.length]),g.useEffect(()=>{if(sessionStorage.getItem("blogFiltersApplied")){sessionStorage.removeItem("blogFiltersApplied");const e=setTimeout(()=>{const s=x.current;if(s)try{const r=s.getBoundingClientRect(),o=window.pageYOffset||document.documentElement.scrollTop,a=r.top+o;window.scrollTo({top:a-100,behavior:"smooth"}),console.log("Scrolled to all-blogs section after filter applied")}catch(r){console.error("Error scrolling to element:",r)}},300);return()=>clearTimeout(e)}},[]);const x=g.useRef(null),C=e=>{e.preventDefault(),x.current&&x.current.scrollIntoView({behavior:"smooth"})},z=b.map(e=>({id:e.slug,label:e.name})),P=T.map(e=>({id:e.slug,label:e.name}));return t.jsxs(V,{title:"Blog",children:[t.jsx("section",{className:"py-16 md:py-20",children:t.jsxs("div",{className:"container flex flex-row justify-between",children:[t.jsx("h1",{className:"w-[70%] text-[34px]/[1.03] font-medium text-[#18161a] max-md:w-4/5 md:text-[51px]/[1.04]",children:"Our latest news and insights"}),t.jsxs("a",{className:"inline-flex max-h-[55px] items-center gap-3 self-end rounded-[80px] border-2 border-[#4716ED] bg-transparent px-4 py-2 text-base/[1.375] font-medium text-[#4716ED] shadow-[0_6px_12px_rgba(0,0,0,0.3),0_1px_2px_rgba(0,0,0,0.3)] transition-all duration-300 ease-[ease-in-out] hover:bg-[#4716ED] hover:text-white hover:shadow-[0_10px_24px_rgba(0,0,0,0.3),0_6px_12px_rgba(0,0,0,0.3)] max-md:mt-6 max-md:self-start",href:"/blogs#all-blogs",onClick:C,children:[t.jsx("svg",{className:"size-5 shrink-0",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:t.jsx("polygon",{fill:"currentColor",fillRule:"evenodd",points:"9.018 0 9.018 12.174 14.629 6.563 16.031 8.016 8.016 16.031 0 8.016 1.403 6.613 7.014 12.174 7.014 0",transform:"translate(3.984 3.984)"})}),"All Blog Posts"]})]})}),t.jsxs("section",{className:"py-16 md:py-20",children:[t.jsxs("div",{className:"container mb-12 flex justify-between max-lg:mb-8 max-lg:flex-col",children:[t.jsx("h4",{className:"text-[34px]/[1.03] font-medium text-[#18161a] md:text-[51px]/[1.04]",children:"Latest posts"}),t.jsxs("div",{className:"inline-flex items-center gap-1 max-lg:mt-6",children:[t.jsx("a",{href:"/blogs#all-blogs",onClick:C,className:"cursor-pointer underline decoration-transparent decoration-2 underline-offset-4 transition-[text-decoration-color] delay-0 duration-[.4s] ease-[ease] hover:decoration-[#6c45f1] hover:duration-200",children:"View more"}),t.jsx("svg",{className:"size-5 text-[#6c45f1]",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:t.jsx("polygon",{fill:"currentColor",fillRule:"evenodd",points:"0 9.018 12.174 9.018 6.563 14.629 8.016 16.031 16.031 8.016 8.016 0 6.613 1.403 12.174 7.014 0 7.014",transform:"translate(3.984 3.984)"})})]})]}),t.jsx("div",{className:"container grid grid-cols-3 gap-6 max-md:grid-cols-1",children:A.map((e,s)=>t.jsx(w,{...e},s))})]}),B.map((e,s)=>t.jsxs("section",{className:"py-16 md:py-20",children:[t.jsxs("div",{className:"container mb-12 flex justify-between max-lg:mb-8 max-lg:flex-col",children:[t.jsx("h4",{className:"text-[34px]/[1.03] font-medium text-[#18161a] md:text-[51px]/[1.04]",children:e}),t.jsxs("div",{className:"inline-flex items-center gap-1 max-lg:mt-6",children:[t.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),f([e]),sessionStorage.setItem("blogFiltersApplied","true"),u.post("/blogs/filter",{category:e},{preserveState:!0,preserveScroll:!0})},className:"cursor-pointer underline decoration-transparent decoration-2 underline-offset-4 transition-[text-decoration-color] delay-0 duration-[.4s] ease-[ease] hover:decoration-[#6c45f1] hover:duration-200",children:"View more"}),t.jsx("svg",{className:"size-5 text-[#6c45f1]",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:t.jsx("polygon",{fill:"currentColor",fillRule:"evenodd",points:"0 9.018 12.174 9.018 6.563 14.629 8.016 16.031 16.031 8.016 8.016 0 6.613 1.403 12.174 7.014 0 7.014",transform:"translate(3.984 3.984)"})})]})]}),t.jsx("div",{className:"container grid grid-cols-3 gap-6 max-md:grid-cols-1",children:v[e].map((r,o)=>t.jsx(w,{...r},o))})]},s)),t.jsxs("section",{ref:x,id:"all-blogs",className:"py-16 md:py-20",children:[t.jsxs("div",{className:"container mx-auto w-full max-w-[1220px] px-6 py-0",children:[t.jsxs("div",{className:"mb-48 text-center",children:[t.jsx("h2",{className:"m-0 text-[1.8571428571rem] leading-[1.08] font-normal text-[#18161a] md:text-[2.6428571429rem]",children:"All Blog Posts"}),t.jsx("p",{className:"text-[1.1428571429rem]/[1.5] font-light text-[#18161a] md:text-2xl/[1.375]",children:"News and insights from our team."})]}),t.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-8 mb-4 md:m-0 md:mx-auto md:mb-14",children:[t.jsx("div",{className:"w-full md:w-auto",children:t.jsx("input",{className:"search h-12 w-full border-0 border-b border-[#300A44] bg-[right_center] py-4 pr-8 pl-4 ring-0 focus:outline-0 focus:border-[#4716ed]",type:"text",name:"search",id:"search",placeholder:"Enter keywords",value:l,onChange:e=>y(e.target.value)})}),t.jsx(_,{title:"Categories",items:z,selectedItems:c,onSelectionChange:e=>f(e),minWidth:250}),t.jsx(_,{title:"Tags",items:P,selectedItems:d,onSelectionChange:e=>S(e),minWidth:250}),t.jsx("button",{className:"flex size-12 items-center justify-center group disabled:cursor-default cursor-pointer",onClick:N,disabled:!l&&c.length===0&&d.length===0&&!i,children:t.jsxs("svg",{className:"text-[#300a44] [transition:color_.4s_ease] group-disabled:text-[#6d6873] group-disabled:[transition:color_.2s_ease]",xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:[t.jsxs("g",{children:[t.jsx("rect",{fill:"none",height:"24",width:"24"}),t.jsx("rect",{fill:"none",height:"24",width:"24"}),t.jsx("rect",{fill:"none",height:"24",width:"24"})]}),t.jsxs("g",{children:[t.jsx("g",{}),t.jsx("path",{d:"M12,5V1L7,6l5,5V7c3.31,0,6,2.69,6,6s-2.69,6-6,6s-6-2.69-6-6H4c0,4.42,3.58,8,8,8s8-3.58,8-8S16.42,5,12,5z"})]})]})})]})]}),t.jsx("div",{className:"container grid grid-cols-3 gap-6 max-md:grid-cols-1",children:m.data.length>0?m.data.map(e=>t.jsx(w,{...p(e)},e.id)):t.jsxs("div",{className:"col-span-3 text-center py-10",children:[t.jsx("p",{className:"text-lg text-gray-600",children:l||c.length>0||d.length>0||i?"No blog posts found matching your filters. Try adjusting your criteria.":"No blog posts found. Check back later for new content."}),(l||c.length>0||d.length>0||i)&&t.jsx("button",{onClick:N,className:"mt-4 px-4 py-2 bg-[#4716ED] text-white rounded-md hover:bg-[#3a11c5] transition-colors cursor-pointer",children:"Clear All Filters"})]})}),m.last_page>1&&t.jsx(D,{currentPage:E,totalPages:m.last_page,handlePageChange:I})]})]})};export{G as default};
